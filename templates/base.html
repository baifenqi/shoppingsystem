<!--template/base.html母模板-- >
<!DOCTYPE html>
<!-- 声明文档类型为HTML5，lang="zh-CN"指定页面语言为中文 -->
<html lang="zh-CN">


<head>
    <!-- 声明页面字符编码为UTF-8，确保中文正常显示 -->
    <meta charset="UTF-8">
    <!-- 响应式布局设置：适应手机、平板等设备屏幕 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 模板占位块：title（页面标题），子模板可覆盖此内容，默认值为"购购购，出发喽" -->
    <title>{% block title %}购购购,出发喽{% endblock %}</title>

    <!-- 引入Bootstrap CSS框架（CDN方式，无需本地下载，直接生效）：提供美观的样式和响应式布局 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">


    <!-- 定义公共样式：优化页面布局，所有继承此模板的页面都会生效 -->
    <style>
        /* 导航栏菜单项间距优化 */
        .navbar-nav .nav-item {
            margin-right:12px;
        }
        /* 页脚样式：灰色背景、顶部边框、内边距，让页脚更美观 */
        .footer {
            margin-top: 60px; /* 与主体内容保持间距，避免紧贴 */
            padding: 30px 0;
            background-color: #f8f9fa; /* 浅灰色背景 */
            border-top: 1px solid #e9ecef; /* 顶部浅灰色边框，分隔页脚与主体 */
        }
        /* 页面主体最小高度：确保页脚始终在页面底部，不会因内容过少置顶 */
        .main-content{
            min-height:70vh;/* 占视口高度的70% */
        }
    </style>    
    

    <!-- 模板占位块：extra_css（页面自定义CSS），子模板可在此添加专属样式，不影响其他页面 -->
    {% block extra_css %}{% endblock %}
</head>



<body>

    <!-- 1. 公共导航栏：所有页面都显示，包含网站名称、导航菜单、用户/购物车入口 -->

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">

        <div class="container">
            <!-- 
            Bootstrap容器：限制最大宽度并居中内容
            作用：在小屏幕上全宽，在大屏幕上居中显示
            -->


           <!-- 网站LOGO/名称：点击跳转到首页，使用反向解析URL，避免硬编码 -->
           <a class="navbar-brand fw-bold text-primary" href="{% url 'products:home' %}"> 
            购购购，出发喽
           </a>

           <!-- 移动端折叠按钮：屏幕小于lg时，导航菜单折叠为按钮，点击展开 -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span> <!-- 折叠按钮图标 -->
            </button>



            <!-- 导航菜单容器：包含左侧商品导航和右侧用户导航 -->
            <div class="collapse navbar-collapse" id="navbarNav">

                <!-- 左侧导航：商品分类/页面入口，me-auto让右侧导航靠右对齐 -->
                <ul class="navbar-nav me-auto">

                    <li class="nav-item">
                        <!-- 首页链接：通过request.path判断当前页面，若为首页则添加active类（高亮） -->
                        <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'products:home' %}">首页</a>    
                    </li>

                    <li class="nav-item">
                        <!-- 全部商品链接：判断URL是否包含products且不包含product（避免与商品详情页冲突），是的话高亮 -->
                        <a class="nav-link {% if 'products' in request.path and 'product' not in request.path %}active{% endif %}" href="{% url 'products:product_list' %}">全部商品</a>    
                    </li>
            
                    <li class="nav-item">
                        <!-- 推荐商品链接：反向解析URL，对应products应用的featured_products路由 -->
                        <a class="nav-link" href="{% url 'products:featured_products' %}">推荐商品</a>
                    </li>

                    <li class="nav-item">
                        <!-- 新品上架链接：反向解析URL，对应products应用的new_arrivals路由 -->
                        <a class="nav-link" href="{% url 'products:new_arrivals' %}">新品上架</a>
                    </li>

                </ul>
                
                <!-- 右侧导航：用户相关操作，根据登录状态显示不同内容 -->
                <ul class="navbar-nav">

                    {% if user.is_authenticated %}
                        <!-- 已登录状态：显示购物车、用户名、退出登录 -->
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'cart:cart_detail' %}">
                                <i class="bi bi-cart3"></i> 购物车 <!-- Bootstrap图标，美化显示 -->
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-danger" href="{% url 'users:logout' %}">
                                退出登录 <!-- 红色字体，醒目提示 -->
                            </a>
                        </li>

                    {% else %}
                        <!-- 未登录状态：显示登录、注册，登录链接携带next参数（登录后返回原页面） -->
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'users:login' %}?next={{ request.path }}">登录</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-primary text-white" href="{% url 'users:register' %}">注册</a>
                        </li>
                    {% endif %}    



                </ul>  
            </div>   
        </div>     
    </nav>
    

    <!-- 2. 页面主体内容：模板占位块content，子模板的核心内容都放在这里，每个页面内容不同 -->
    <div class="main-content container mt-4">
        {% block content %}{% endblock %}<!--TODO-->
    </div>


    <!-- 3. 公共页脚：所有页面都显示，包含版权信息 -->
    <footer class="footer"><!--页脚-->
        <div class="container text-center"> <!-- 居中显示内容 -->
            <p class="text-muted mb-0">© 2025 PyShop 电商平台 | 仅供学习使用</p> <!-- 版权信息，浅灰色字体 -->
            <p class="text-muted mt-2 small">技术支持：Django + Bootstrap</p> <!-- 技术栈说明，小号字体 -->
        </div>
    </footer>






    <!-- 引入Bootstrap JS：支持导航栏折叠、弹窗、标签页等交互功能，必须在body末尾引入 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 引入Bootstrap图标库：提供丰富的图标，如购物车、用户等，美化页面 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.js"></script>
    <!-- 模板占位块：extra_js（页面自定义JS），子模板可在此添加专属交互逻辑，不影响其他页面 -->
    {% block extra_js %}{% endblock %}

</body>

</html>
